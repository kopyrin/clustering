# clustering
Кластеризатор запросов  Яндекс директ
Какую проблему решает  эта программа?
При создании компании в Яндекс директ из Яндекс WordStat копируется масса "Мусорных" ключевых фраз.

Для того что бы с ними как то организовано работать и создана эта программа.

Что она делает? (v от 2025/05/29)

Загружает данные из файла с набором ключей clasters.txt во внутреннюю базу данных clasters.dbf. Во время загрузки выделяет в строке первые два части строки которые отделены друг от друга знаком табуляции.
в первом находится ключевая фраза которую ищут в Яндексе во второй части количество запросов в месяц.

На основании эти данных создается файл используемых слов. 

Каждому слову дается знаечение максимального количества запросов и лемма этого слова (Ле́мма (англ. lemma) — начальная, словарная форма слова) 

Файл с запросами еще раз обрабатывается. Каждому слову по лемме находят максимальное количество запросов и сортируют слова внутри запроса таким образом , что бы слова с максимальным количеством запросов были слева а далее находились слова с меньшим количеством запросов.
Далее данные из фала выгружаются в файл clasters-long.txt Его можно загрузить в Excel и далее уже видеть запросы отсортированные по кластерам (самым востребованным словам которые находятся слева)

Как с ней работать?
1) Из любого источника (кейколлектор, словоёб, акварикс) создайте файл с запросами clasters.txt и поместите в каталог программы. Формат - текстовый файл 
   с разделителями между полями табуляция. Первая колонка - запрос, вторая колонка - частотность. Остальные не важно.
   Программе не важно сколько будет слов в запросе она обработает первые 8. При таком раскладе давать запросы длиннее 8 слов 
   не рекомендуется т.к. слова будут теряться
2) Запустите файл лемматизатор_копырина.exe
    При первом запуске программы будет создана словарь с леммами из файла diclemmas.txt. Файл diclemmas.txt будет переименован в diclemmas.txt-old
    Можете изменить файл diclemmas.txt  что бы леммы были написаны по другому и запустить программу. Программа очистит словарь лемм и заполнит 
    ее снова из файла.

3) Дождитесь окончания работы программы (
   clasters.txt будет переименован в clasters.txt-old, 
   будут созданы файлы: 
     clasters-long.txt со всеми ключами 
     clasters-short.txt только с вершинами групп (максимальная частотность у фразы из группы)
     clasters-minus.txt c ключами которые не участвуют в кластеризации. Они а) содержат минус слова б) содержат более 8 слов
     words.txt В нем находится список слов которые были в запросах
     lemmas.txt - В нем находится список лемм которые были в запросах

4) Отройте любым редактором файл words.txt (например Notepead++)
5) Откройте любым редактором файл minus.txt. В нем находятся минус слова - слова с которыми запросы не будут использованы для организации групп и будут 
   убраны из списка запросов. Сейчас там уже находятся слова пошлой тематики. По списку из файла words.txt перенесите туда слова которые вы считаете неприемлимыми 
   в запросах по вашей теме. 
6) Выберите файл clasters-long.txt или clasters-short.txt и переименуйте его в clasters.txt
7) Еще раз запустите программу
   Сделайте так несколько раз пока не уберете все минус слова. 
   
8) Выберите начиная с конца списка слова с чатотой запросов от 1 до 10. Скопируйте их в буфер Windows.
9) Откройте любым редактором файл pretext.txt. В нем находятся слова которые не участвуют в создании групп слов. В нем уже находятся названия городов,
   мужские и женские имена, названия областей. Из буфера обмена поместите туда малоиспользуемые слова что бы не было длинных названий групп.
10) Еще раз запустите программу
   Сделайте так несколько раз пока не уберете все лишние слова из названия групп. 
11) Откройте файл clasters-short.txt и посмотрите результат работы. Удобно это сделать в Excel  Полученный результат запросов можно поместить в 
   Прогноз бюджета Яндекс директ и оценить стоимость каждого запроса и стоимость компании в целом. Если цена запроса не очень высока то группы можно 
   укрупнить что позволяет сэкономить время на написании текстов объявлений.

Достоинства
1) Скорость работы 
2) Количество обрабатываемых запросов (в базу можно поместить 2,5 миллиона запросов одновременно)
3) Словарь лемм содержит ~ 3,5 млн словоформ. 
4) Программу не нужно устанавливать - можно просто скопировать Возможно работать с разными компаниями в разных каталогах
5) Точность группировки вы выбираете сами. От 1 слова до минимального количества групп (используйте файл pretext.txt)
6) Вы можете использовать минус слова сразу для рекламной компании - просто скопируйте их из файла minus.txt

Проект сделан на Visual foxPro 9.0

